# 这个 Safari 漏洞如何暴露你的 Mac 或 iPhone 上的文件

> 原文:[https://life hacker . com/how-this-safari-bug-can-expose-files-on-your-MAC-or-iph-1844840970](https://lifehacker.com/how-this-safari-bug-can-expose-files-on-your-mac-or-iph-1844840970)

安全研究员 [Pawel Wylecial](https://blog.redteam.pl/2020/08/stealing-local-files-using-safari-web.html) 昨天公开披露了 Safari 的一个漏洞，*可以*说服用户将他们系统上的任何文件秘密发送给接收者。

Watch

虽然 Wylecial 自己说这个错误“不是很严重”，因为它仍然需要一个人手动*做*一些事情，以便错误地将一个文件从一个人的系统发送到另一个人——包括输入一个收件人——,这很容易使用户看不到共享的文件。我想到的最接近的比较是点击劫持，因为我们试图说服不知情的用户执行一些操作。”

它的工作原理非常简单。Safari 的 Web Share API 支持*文件:// URI* 方案。因此，你可以在用户通过第三方应用分享内容时使用的同一个网站按钮中加入一个用户电脑上文件的链接。

所以，例如，点击 [这个按钮](https://overflow.pl/webshare/poc1.html) :

比如说，通过 macOS 邮件应用程序来分享这张照片，会产生一条相当无害的信息——“*看看这只可爱的小猫！”*——这也包括你的 Mac 的“passwd”文件，因为这个按钮还包括站点源代码中的变量“file:///etc/passwd”:

如果你注意了的话，你会注意到你邮件中的附件，可能会质疑和/或迅速删除， b 但是如果你没有注意，那么，你可能只是发送了一个你不想发送给收件人的文件。我完全可以看到一个网站滥用这一功能，鼓励用户将内容分享到某种包含这些信息的收件箱中。

再说一次，如果你相当精通技术，你可能不太可能被骗，但那些不精通技术的人可能会被骗，特别是因为当你使用其他应用程序创建消息时，很难分辨你实际上共享的是什么文件。正如 Wylecial 所写的，例如，Gmail 应用程序将文件名弄得一团糟，以至于你甚至不知道你正在共享你的密码文件(继续这个例子)。

Wylecial 在 2020 年 4 月向苹果公司披露了这一漏洞。苹果终于在 7 月份回复说，他们正在调查这个问题，并在 8 月份澄清说，他们将在 2021 年春天的安全更新中修补这个问题。